import{j as t,c as E,r as o}from"./index-Jmz1EYtv.js";import W from"./VideoCard-BziJ7otD.js";import A from"./VideoModal-DnIoznJN.js";const O=({blog:l})=>t.jsxs("a",{href:l.link,target:"_blank",rel:"noopener noreferrer",className:"block border rounded-xl p-4 hover:shadow-lg transition-all duration-300 bg-white hover:bg-gray-50",children:[t.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700",children:l.title}),t.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[t.jsx("strong",{children:"Source:"})," ",l.source]}),t.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:[t.jsx("strong",{children:"Level:"})," ",l.level]})]});function U(){const{bookmarks:l,toggleBookmark:N,watched:y,toggleWatched:C}=E(),[S,k]=o.useState([]),[g,u]=o.useState([]),[a,L]=o.useState(""),[i,B]=o.useState("Beginner"),[m,V]=o.useState(4),[x,p]=o.useState(null),[I,F]=o.useState([]),[j,f]=o.useState([]),[b,d]=o.useState(!1);o.useEffect(()=>{(async()=>{d(!0);try{const s=await fetch("/videos.json"),r=await fetch("/blogs.json"),n=await s.json(),h=await r.json(),c=R(n);k(c),u(v(c)),F(h),f(w(h))}catch(s){console.error("Error loading data:",s)}finally{d(!1)}})()},[]);const D=()=>{d(!0);const e=v(S),s=w(I);u(e),f(s),d(!1)},M=e=>new URL(e).searchParams.get("v"),R=e=>e.map(s=>({id:{videoId:M(s.link)},snippet:{title:s.title,description:`Watch this video by ${s.source}`,level:s.level,tags:s.tags,channelTitle:s.source}})),v=e=>e.filter(s=>{var c;const r=s.snippet.title.toLowerCase(),n=s.snippet.description.toLowerCase(),h=((c=s.snippet.level)==null?void 0:c.toLowerCase())===i.toLowerCase();return(a===""||r.includes(a.toLowerCase())||n.includes(a.toLowerCase()))&&h}),w=e=>e.filter(s=>{const r=s.title.toLowerCase().includes(a.toLowerCase()),n=i===""||s.level===i;return r&&n});return t.jsxs("div",{className:"p-4",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"ðŸŽ¯ Today's Feed"}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[t.jsx("input",{type:"text",placeholder:"Search topic (e.g. React, DSA, etc)",value:a,onChange:e=>L(e.target.value),className:"border p-2 rounded w-full sm:w-2/3"}),t.jsxs("select",{value:i,onChange:e=>B(e.target.value),className:"border p-2 rounded",children:[t.jsx("option",{value:"Beginner",children:"Beginner"}),t.jsx("option",{value:"Intermediate",children:"Intermediate"}),t.jsx("option",{value:"Advanced",children:"Advanced"})]}),t.jsx("button",{onClick:D,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Search"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"ðŸ“š Recommended Blogs"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j.length===0?t.jsx("p",{className:"text-gray-500 italic",children:"No blogs found."}):j.map(e=>t.jsx(O,{blog:e},e.id))})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:b?t.jsx("p",{children:"Loading videos..."}):g.length===0?t.jsx("p",{className:"text-gray-500 italic",children:"No videos found. Try another topic or level."}):g.slice(0,m).map(e=>t.jsx(W,{video:e,onOpenModal:()=>p(e),isBookmarked:l.some(s=>s.id.videoId===e.id.videoId),toggleBookmark:()=>N(e),isWatched:y.some(s=>s.id.videoId===e.id.videoId),toggleWatched:()=>C(e)},e.id.videoId))}),!b&&g.length>m&&t.jsx("div",{className:"mt-6 text-center",children:t.jsx("button",{onClick:()=>V(e=>e+6),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Load More"})}),x&&t.jsx(A,{video:x,onClose:()=>p(null)})]})}export{U as default};
